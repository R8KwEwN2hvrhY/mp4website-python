/*! @name @filmgardi/videojs-subtitle-settings @version 2.0.10 @license MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).videojsSubtitleSettings=e(t.videojs)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t);function o(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var i=o((function(t){function e(n,o){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,o)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),a=o((function(t){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),s=function(t){return(e=t)&&"object"==typeof e?Object.keys(t):[];var e};function l(t,e){s(t).forEach((function(n){return e(t[n],n)}))}var r=n.default.getComponent("Component");n.default.getComponent("ModalDialog");var u=n.default.getComponent("TextTrackSettings"),c=["#000","Black"],d=["#00F","Blue"],p=["#0FF","Cyan"],h=["#0F0","Green"],f=["#F0F","Magenta"],g=["#F00","Red"],m=["#FFF","White"],v=["#FF0","Yellow"],y=["1","Opaque"],b=["0.5","Semi-Transparent"],C=["0","Transparent"],k={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[c,m,g,h,d,v,f,p]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[y,b,C]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[m,c,g,h,d,v,f,p]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[y,b]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[C,b,y]}};function _(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}k.windowColor.options=k.backgroundColor.options;var S=function(t){function e(e,n){var o;return n.temporary=!1,(o=t.call(this,e,n)||this).setDefaults(),l(k,(function(t){o.on(o.$(t.selector),"change",o.updateDisplay)})),o}a(e,t);var n=e.prototype;return n.createElSelect_=function(t,e,n){var o=this;void 0===e&&(e=""),void 0===n&&(n="label");var i=k[t],a=i.id.replace("%s",this.id_),s=[e,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map((function(t){var e=a+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+s+" "+e+'">',o.localize(t[1]),"</option>"].join("")}))).concat("</select>").join("")},n.getValues=function(){var t,e,n,o=this;return e=function(t,e,n){var i,a,s=(i=o.$(e.selector),a=e.parser,_(i.options[i.options.selectedIndex].value,a));return void 0!==s&&(t[n]=s),t},void 0===(n={})&&(n=0),s(t=k).reduce((function(n,o){return e(n,t[o],o)}),n)},n.setValues=function(t){var e=this;l(k,(function(n,o){!function(t,e,n){if(e)for(var o=0;o<t.options.length;o++)if(_(t.options[o].value,n)===e){t.selectedIndex=o;break}}(e.$(n.selector),t[o],n.parser)}))},n.setDefaults=function(){var t=this;l(k,(function(e){var n=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=n}))},e}(u);r.registerComponent("TextTrackSettings",S);var x={fa:"Farsi",ar:"Arabic",de:"Germany",en:"English",es:"Spain",ckb:"Kurdish",fr:"French",ja:"Japanese",ko:"Korean",hi:"Hindi",tr:"Turkey",ru:"Russian",pl:"Poland",pt:"Portugal",it:"Italy",heb:"Hebrew"},j=n.default.getComponent("Component"),I=n.default.getComponent("Menu"),T=n.default.getComponent("TextTrackButton"),w=n.default.getComponent("TextTrackMenuItem"),B=n.default.getComponent("OffTextTrackMenuItem"),M=n.default.dom,z=function(t){function e(e,n){var o;return void 0===n&&(n={}),n.label="subtitle",n.title=e.localize(n.title||"Subtitle"),(o=t.call(this,e,n)||this).label_="subtitles",o.name_="SubtitleMenuButton",o}a(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.createItems=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=w),t.push(new B(this.player_,{kinds:this.kinds_,kind:this.kind_,label:"off"})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<n.length;o++){var i=n[o];if(this.kinds_.indexOf(i.kind)>-1){var a=x[n[o].language]||"unknown",s=this.player_.localize(a)+" ("+a+")";a&&(i.label=s);var l=new e(this.player_,{track:i,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass("vjs-"+i.kind+"-menu-item"),t.push(l)}}return t},n.createMenu=function(){var t=new I(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=M.createEl("li",{className:"vjs-menu-title",innerHTML:this.options_.title,tabIndex:-1}),n=new j(this.player_,{el:e});t.addItem(n)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)t.addItem(this.items[o]);return t},e}(T);z.prototype.kinds_=["captions","subtitles"],z.prototype.controlText_="Subtitles",j.registerComponent("SubtitleMenuButton",z);var E=n.default.getComponent("Component"),L=n.default.getComponent("AudioTrackButton"),A=n.default.getComponent("AudioTrackMenuItem"),F=function(t){function e(e,n){var o;return void 0===n&&(n={}),n.tracks=e.audioTracks(),n.label="language",n.title=e.localize(n.title||"AudioLanguage"),(o=t.call(this,e,n)||this).name_="AudioMenuButton",o}a(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++){var o=e[n],i=x[e[n].language.toLowerCase()],a=this.player_.localize(i)+" ("+i+")";i&&(o.label=a),t.push(new A(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return t},e}(L);L.prototype.controlText_="Audio Track",E.registerComponent("AudioMenuButton",F);var O=n.default.dom,D=function(){function t(t,e,n){this.player=t,this.options=e,this.parent=n,this.toggleInput=null}var e=t.prototype;return e.create=function(){var t=O.createEl("div",{className:"vjs-menu-toggle-swtich",tabIndex:-1});this.toggleInput=O.createEl("input",{className:"vjs-menu-toggle-swtich-input",type:"checkbox",tabIndex:-1}),this.toggleInput.checked=this.options.defaultState||!1,t.appendChild(this.toggleInput);var e=O.createEl("div",{className:"vjs-menu-toggle-switch-slider",tabIndex:-1});t.appendChild(e),this.parent&&this.parent.appendChild(t)},e.toggle=function(t){this.toggleInput&&(this.toggleInput.checked=t)},t}(),N=n.default.getComponent("MenuItem"),q=n.default.dom,P=function(t){function e(e,n){return t.call(this,e,n)||this}a(e,t);var n=e.prototype;return n.apply=function(){this.player_&&this.player_.textTrackSettings&&(this.player_.textTrackSettings.updateDisplay(),this.player_.play(!0))},n.createEl=function(){var t=q.createEl("li",{className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1});return this.switch=new D(this.player_,this.options_,t),this.switch.create(),t},n.toggle=function(t){this.switch&&this.switch.toggle(t)},n.handleClick=function(t){this.apply()},e}(N),H=n.default.getComponent("Component"),R=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).sizes_=["1.00","1.25"],o.defaultSizes_=o.sizes_[0],o.name_="FontSizeItem",o.sizeIndex=0,o.status=!1,o.hideThreshold_=1,o.addClass("vjs-menu-item-font"),o.update(),o}a(e,t);var n=e.prototype;return n.update=function(){var t=this.player_.textTracks(),e=t;t&&t.tracks_&&(e=t.tracks_),e&&e.length<this.hideThreshold_?this.hide():this.show()},n.increamentSizeIndex=function(){this.sizeIndex===this.sizes_.length-1?this.sizeIndex=0:this.sizeIndex++},n.getSize=function(){this.increamentSizeIndex();var t=this.sizes_[this.sizeIndex];return Number(t)},n.changeFontSize=function(){if(this.player_){var t=this.player_.textTrackSettings;t&&t.setValues({fontPercent:this.getSize()})}},n.handleClick=function(e){this.changeFontSize(),this.status=!this.status,t.prototype.toggle.call(this,this.status),t.prototype.handleClick.call(this,e)},e}(P);H.registerComponent("FontSizeItem",R);var V=n.default.getComponent("Component"),$=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).colors_=n.colors||["transparent","#000"],o.name_="FontBackgroundItem",o.colorIndex=0,o.status=!1,o.hideThreshold_=1,o.addClass("vjs-menu-item-background"),o.setDefault({backgroundOpacity:"0"}),o}a(e,t);var n=e.prototype;return n.update=function(){var t=this.player_.textTracks(),e=t;t&&t.tracks_&&(e=t.tracks_),e&&e.length<this.hideThreshold_?this.hide():this.show()},n.setDefault=function(t){var e=this.player_.textTrackSettings,n={};for(var o in t)n[o]=t[o];e.setValues(n),e.updateDisplay(),this.update()},n.increamentColorIndex=function(){this.colorIndex===this.colors_.length-1?this.colorIndex=0:this.colorIndex++},n.getColor=function(){return this.increamentColorIndex(),this.colors_[this.colorIndex]},n.changeColor=function(){if(this.player_){var t=this.player_.textTrackSettings;if(t){var e={},n=this.getColor();e.backgroundColor=n,e.backgroundOpacity="transparent"===n?"0":"1",t.setValues(e)}}},n.handleClick=function(e){this.changeColor(),this.status=!this.status,t.prototype.toggle.call(this,this.status),t.prototype.handleClick.call(this,e)},e}(P);V.registerComponent("FontBackgroundItem",$);var G=n.default.getPlugin("plugin"),K=n.default.getComponent("MenuButton");n.default.getComponent("MenuItem");var W={placementIndex:null,items:["FontSizeItem","FontBackgroundItem","SubtitleMenuButton","AudioMenuButton"],languages:{settings:"LanguageAndSubtitle",loading:"Loading",back:"Back",captions_off:"off",default_audio:"Default Audio",audio:"AudioLanguage",subtitle:"Subtitle",fontSize:"BiggerFont",fontBackground:"FontBackground"}},J=function(t){function e(e,o){var i;return(i=t.call(this,e)||this).options=n.default.mergeOptions(W,o),i.playerId=i.player.id(),i.player.ready((function(){i.player.addClass("vjs-subtitle-settings"),i.player.addClass("vjs-settings-menu"),i.buildSettingButton()})),i.player.on("click",(function(t){i.player.getChild("controlBar").getChild("settingsMenuButton").el_.contains(t.target)||document.getElementById(i.playerId).getElementsByClassName("vjs-settings-menu")[0].querySelectorAll(".vjs-menu").forEach((function(t){t.classList.remove("vjs-lock-open")}))})),i.player.on("loadstart",(function(t){i.player.one("canplaythrough",(function(t){i.buildTopLevelMenu()}))})),i}a(e,t);var o=e.prototype;return o.buildSettingButton=function(){var t=this,e=function(e){function n(n,o){var i;return(i=e.call(this,n,o)||this).addClass("vjs-settings-menu"),i.controlText(t.player.localize(t.options.languages.settings)),i.menu.contentEl_.id=t.playerId+"-vjs-settings-menu-default",i}return a(n,e),n.prototype.handleClick=function(){this.el().classList.toggle("vjs-toggle-btn"),this.menu.el().classList.toggle("vjs-lock-open")},n}(K);n.default.registerComponent("settingsMenuButton",e);var o=this.player.getChild("controlBar"),i=this.options.placementIndex||o.children().length-1;o.addChild("settingsMenuButton",{},i)},o.buildTopLevelMenu=function(){var t=this,e=this.player.getChild("controlBar").getChild("settingsMenuButton");e.addClass("vjs-settings-menu-is-loaded");var o=e.menu,i=e.menu.contentEl_;i.innerHTML="",i.classList.add("vjs-top-level-menu");var a=document.createElement("li");a.className="vjs-menu-title";var s=document.createElement("span");s.innerHTML=this.player.localize(this.options.languages.settings),a.appendChild(s),i.appendChild(a),this.options.items.forEach((function(e){var a=n.default.getComponent(e);if(a&&"function"==typeof a){var s=t.setInitialStates(e),l=new a(t.player,{label:t.player.localize(s.language)}),r=l instanceof K;if(r||o.addChild(l,null,o.contentEl_.children.length),r){if(l.items&&l.items.length<=l.hideThreshold_)return;var u=document.createElement("li");u.innerHTML=t.player.localize(s.language),u.setAttribute("data-component",e.toLowerCase()),u.className="vjs-menu-item vjs-menu-item-forward";var c=document.createElement("span");c.id="setting-menu-child-span-"+e.toLowerCase(),c.className="vjs-selected-item-value",c.innerHTML=t.player.localize(s.default),u.appendChild(c),i.appendChild(u),t.buildMenuList(e,l)}}}));var l=document.querySelectorAll(".vjs-menu-item.vjs-menu-item-forward");Array.from(l).forEach((function(t){t.addEventListener("click",(function(t){var e=document.querySelectorAll(".vjs-top-level-menu");Array.from(e).forEach((function(t){t.classList.add("vjs-hidden")}));var n=document.getElementById("setting-menu-child-menu-"+this.getAttribute("data-component"));n.classList.remove("vjs-hidden"),n.classList.add("vjs-lock"),t.preventDefault()}))})),l.length<1&&e.hide()},o.buildMenuList=function(t,e){var n=this,o=this.player.getChild("controlBar").getChild("settingsMenuButton");if(e){for(var i=e,a=i.menu.contentEl_,s=0;s<a.children.length;s++){"vjs-menu-title"===a.children[s].getAttribute("class")&&a.children[s].remove()}a.id="setting-menu-child-menu-"+t.toLowerCase(),a.classList.add("vjs-hidden");var l=document.createElement("li");l.className="vjs-menu-title vjs-menu-item-backward",l.innerHTML=i.options_.title,l.setAttribute("data-component",t.toLowerCase()),l.onclick=function(t){var e=document.getElementById("setting-menu-child-menu-"+this.getAttribute("data-component")).querySelectorAll(".vjs-selected");void 0!==e&&e.length>0&&e[0].textContent&&(document.getElementById("setting-menu-child-span-"+this.getAttribute("data-component")).innerText=n.cleanDefault(e[0].textContent));var i=o.el().querySelectorAll(".vjs-top-level-menu");Array.from(i).forEach((function(t){t.classList.remove("vjs-hidden")}));var a=o.el().querySelectorAll(".vjs-menu-content");Array.from(a).forEach((function(t){t.classList.contains("vjs-lock")&&(t.classList.remove("vjs-lock"),t.classList.add("vjs-hidden"))}))},a.insertBefore(l,a.firstChild),o.menu.el().appendChild(a)}},o.setInitialStates=function(t){switch(t){case"RatesButton":return{default:"auto",language:this.options.languages.quality};case"PlaybackRateMenuButton":return{default:"1x",language:this.options.languages.speed};case"ChaptersButton":return{default:"",language:this.options.languages.chapters};case"AudioMenuButton":case"AudioTrackButton":for(var e=this.player.audioTracks(),n=this.options.languages.defaultAudio,o=e.length;o--;)e[o].enabled&&(n=e[o].label);return{default:n,language:this.options.languages.audio};case"SubtitleMenuButton":case"SubsCapsButton":for(var i=this.player.textTracks(),a=this.options.languages.captions_off,s=i.length;s--;)"subtitles"===i[s].kind&&"showing"===i[s].mode&&(a=i[s].label);return{default:this.cleanDefault(a),language:this.options.languages.subtitle};case"FontSizeItem":return{default:"",language:"BiggerFont"};case"FontBackgroundItem":return{default:"",language:"FontBackground"};default:return{default:"",language:"Menu"}}},o.cleanDefault=function(t){var e=-1!==(t=t.replace(/\s\s+/g," ")).indexOf(",")?t.indexOf(","):t.indexOf("،");return t=(t=(t=t.substring(0,-1!=e?e:t.length)).replace(/(<([^>]+)>)/gi,"")).replace(/(\(([^>]+)\))/gi,"")},e}(G);return J.defaultState={},J.VERSION="2.0.10",n.default.registerPlugin("subtitleSettings",J),J}));